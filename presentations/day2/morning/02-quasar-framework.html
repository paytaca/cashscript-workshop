<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quasar Framework - Day 2</title>

    <style>
        /* pre > code {
            font-size:2rem;
            line-height: 1.1em;
        } */

        pre:hover:has(code) {
            transform: scale(1.5) translateY(-10%);
        }
    </style>

    <link rel="stylesheet" href="/node_modules/reveal.js/dist/reveal.css">
    <link rel="stylesheet" href="/node_modules/reveal.js/dist/theme/league.css">
    <link rel="stylesheet" href="/node_modules/reveal.js/plugin/highlight/monokai.css">
    <link rel="stylesheet" href="/presentations/css/style.css">
</head>
<body>
    <div class="reveal">
        <div class="slides">
            <section>
                <div>
                    <h1 class="flex items-center justify-center gap-3 mb-4">
                        Quasar Framework
                    </h1>
                    <h3 class="text-2xl mb-2">Day 2 - Morning Session</h3>
                    <p class="text-lg">
                        Building Apps using the Quasar Framework
                    </p>
                </div>
            </section>

            <section data-auto-animate>
                <h3>Goal</h3>
                <div class="p-2 rounded-lg bg-white/10">
                    Create a user interface for the PasswordVault contract with Quasar Framework
                </div>
                <ul>
                    <li class="fragment">Create contract instance through the app</li>
                    <li class="fragment">Claim BCH from the contract</li>
                    <li class="fragment">Retrieve the unused funds from our contract</li>
                </ul>
            </section>

            <section>
                <h3>Why We Need a UI</h3>
                <div class="flex space-x-4">
                    <div class="fragment flex-1 px-2 py-10 bg-white/10 rounded-lg flex-col justify-center">
                        <div class="text-4xl mb-2">üë©‚Äçüíª Cashscript Playground</div>
                        <div class="text-2xl">Developers write and test contracts in a coding environment</div>
                        <!-- <ul class="text-2xl">
                            <li>Developer writes & tests contract in code editor</li>
                            <li>Useful for learning</li>
                            <li>Not practical for end-users</li>
                        </ul> -->
                    </div>
                    <div class="fragment flex-1 px-2 py-10 bg-white/10 rounded-lg flex-col justify-center">
                        <div class="text-4xl mb-2">üíª Command Line</div>
                        <div class="text-2xl">
                            Run contracts manually with commands‚Äîpowerful but technical and error-prone
                        </div>
                        <!-- <ul class="text-2xl">
                            <li>Terminal / console for manual commands</li>
                            <li>User must type raw parameters (addresses, keys, amounts)</li>
                            <li>Not user friendly</li>
                        </ul> -->
                    </div>
                    <div class="fragment flex-1 px-2 py-10 bg-white/10 rounded-lg flex-col justify-center">
                        <div class="text-4xl mb-2">üì± User interface</div>
                        <div class="text-2xl">
                            Simple forms and buttons that make contracts easy for anyone to use
                        </div>
                        <!-- <ul class="text-2xl">
                            <li>Clean graphical interface</li>
                            <li>Accessible to non-technical users</li>
                        </ul> -->
                    </div>
                </div>
            </section>

            <section>
                <section>
                    <h3>Architecture of Blockchain Apps</h3>
                    <div id="blockchain-app-arch" class="mermaid p-2 bg-white rounded-lg">
                        sequenceDiagram
                        participant User as üë§ User
                        participant App as üì± App
                        participant Frontend as üíª Javascript
                        participant Indexer as üìä Indexer
                        participant Chain as ‚õìÔ∏è Blockchain
    
                        loop Happens in parallel
                            Indexer->> Chain: Scan new blocks
                            Chain-->> Indexer: Transactions
                            Indexer->> Indexer: Store in DB
                        end
                        User->>App: Interact (e.g. view balance, send tx)
                        App->>Frontend: Handle request
                        Frontend->>Indexer: Call API (balances, tx history, etc.)
                        Indexer->>Frontend: Return processed data
                        Frontend->>App: Display data to user
                    </div>
                </section>
                <section>
                    <h3>Architecture of Blockchain Apps</h3>
                    <div class="py-2 px-8 rounded-lg bg-white/10 mt-2 text-left">
                        <div class="text-2xl">üë§ User</div>
                        <div class="text-xl">
                            The person clicking buttons or sending a transaction
                        </div>
                    </div>  
                    <div class="py-2 px-8 rounded-lg bg-white/10 mt-2 text-left">
                        <div class="text-2xl">üì± App</div>
                        <div class="text-xl">
                            The actual application (UI) that the user interacts with.
                        </div>
                    </div>  
                    <div class="py-2 px-8 rounded-lg bg-white/10 mt-2 text-left">
                        <div class="text-2xl">üíª Javascript</div>
                        <div class="text-xl">
                            The code inside the app that talks to servers and
                            shows results on screen
                        </div>
                    </div>  
                    <div class="py-2 px-8 rounded-lg bg-white/10 mt-2 text-left">
                        <div class="text-2xl">üìä Indexer</div>
                        <div class="text-xl">
                            Servers that transforms blockchain data into something apps
                            can use like balances & transaction histories.
                            <span> (e.g. Network providers in cashscript)</span>
                        </div>
                    </div>  
                    <div class="py-2 px-8 rounded-lg bg-white/10 mt-2 text-left">
                        <div class="text-2xl">‚õìÔ∏è Blockchain</div>
                        <div class="text-xl">
                            The network that stores all transactions
                            securely and permanently.
                        </div>
                    </div>  
                </section>
                <section>
                    <h3>Javascript to App</h3>
                    <span class="fragment">Previously we have created the Javascript layer.</span>
                    <span class="fragment">In this section, we will create the App layer</span>
                </section>
            </section>

            <section>
                <h3>What is quasar</h3>
                <p>Quasar is an MIT licensed open-source Vue.js based framework,
                    which allows you as a web developer to quickly create responsive
                    websites/apps
                </p>
            </section>
            <section>
                <h3>Vue.js</h3>
                <div>
                    Quasar is build on top of Vue.js, 
                    a JavaScript framework creating a declarative, component-based programming
                    model to efficiently develop complex user interfaces
                </div>
            </section>
            <section>
                <h3>Why Quasar?</h3>
                <ul>
                    <li>Easily create interactive user interface with VueJS</li>
                    <li>Huge list web app components & utilities</li>
                    <li>Requires a single codebase for all platforms</li>
                </ul>
            </section>
            <section>
                <section>
                    <div class="rounded-lg p-2 bg-white/10 text-6xl text-center">
                        One codebase = All platforms
                    </div>
                    <ul>
                        <li>Web application</li>
                        <li>Mobile application</li>
                        <li>Desktop application</li>
                        <li>Browser extension</li>
                    </ul>
                </section>
                <section>
                    <h3>Web App</h3>
                    <ul>
                        <li>Single Page App (SPA)</li>
                        <li>Progressive Web App (PWA)</li>
                        <li>Server-side rendering (SSR)</li>
                    </ul>
                </section>
                <section>
                    <h3>Mobile App</h3>
                    <div class="text-3xl">
                        Capacitor JS builds web applications into native mobile apps
                    </div>
                    <ul>
                        <li>Android</li>
                        <li>iOS</li>
                    </ul>
                </section>
                <section>
                    <h3>Desktop App</h3>
                    <div class="text-3xl">
                        Electron JS builds web applications into desktop apps
                    </div>
                    <ul>
                        <li>Windows</li>
                        <li>Mac</li>
                        <li>Linux</li>
                    </ul>
                </section>
            </section>

            <section>
                <h5>Activity: Setup development</h5>
                <ol style="min-width:50vw;">
                    <li>
                        <div>Open command line</div>
                    </li>
                    <li>
                        <div>Change directory to <i>password-vault-ui</i> folder:</div>
                        <div><i class="text-yellow-300">cd password-vault-ui</i></div>
                    </li>
                    <li>
                        <div>Install quasar cli:</div>
                        <div><i class="text-yellow-300">npm install -g @quasar/cli</i></div>
                    </li>
                    <li>
                        <div>Run dev server:</div>
                        <div><i class="text-yellow-300">quasar dev</i></div>
                    </li>
                    <li>
                        <div>Open server in browser:</div>
                        <div><i class="text-blue-300">http://localhost:9000</i></div>
                    </li>
                </ol>
            </section>

            <section>
                <div>Project structure</div>
                <pre><code data-trim class="language-text">
                    quasar-project/
                    ‚îú‚îÄ‚îÄ quasar.conf.js   # Quasar configuration
                    ‚îú‚îÄ‚îÄ package.json     # Dependencies & scripts
                    ‚îú‚îÄ‚îÄ index.html       # Main html file
                    ‚îú‚îÄ‚îÄ public/          # Static assets
                    ‚îú‚îÄ‚îÄ src/
                    ‚îÇ   ‚îú‚îÄ‚îÄ assets/      # Images, etc.
                    ‚îÇ   ‚îú‚îÄ‚îÄ css/         # CSS, SASS, SCSS files
                    ‚îÇ   ‚îú‚îÄ‚îÄ boot/        # App boot files
                    ‚îÇ   ‚îú‚îÄ‚îÄ components/  # Reusable UI components
                    ‚îÇ   ‚îú‚îÄ‚îÄ layouts/     # App layouts
                    ‚îÇ   ‚îú‚îÄ‚îÄ pages/       # Route pages
                    ‚îÇ   ‚îú‚îÄ‚îÄ router/      # Routes
                    ‚îÇ   ‚îú‚îÄ‚îÄ stores/      # Pinia stores
                    ‚îÇ   ‚îî‚îÄ‚îÄ App.vue      # Root component
                    ‚îî‚îÄ‚îÄ dist/            # Build output
                </code></pre>
                <div class="p-2 rounded-lg bg-white/10">
                    How to create a quasar project:
                    <a href="https://quasar.dev/start/quick-start" data-preview-link>
                        https://quasar.dev/start/quick-start
                    </a>
                </div>
            </section>
            <section>
                <h3>Vue App Structure</h3>
                <div>Vue app is composed of components put together into an tree-like structure</div>
                <div class="flex justify-center">
                    <img src="../../images/ComponentsDiagram.svg" alt="Components diagram">
                </div>
            </section>
            <section>
                <section>
                    <h3>Vue file</h3>
                    <div>
                        Each component is written as single <i class="text-yellow-200">.vue</i>
                        file with 3 sections:
                    </div>
                    <ul>
                        <li>Template (HTML)</li>
                        <li>Script (Javascript)</li>
                        <li>Style (CSS)</li>
                    </ul>
                </section>
                <section>
                    <h3>Template</h3>
                    <div>Defines the HTML structure of your component.</div>
                    <pre><code data-trim class="language-html">
                        <template>
                            <div>
                                <h5>Contract address: {{ contractAddress }}</h5>
                                <button> Create contract </button>
                            </div>
                        </template>
                    </code></pre>
                </section>
                <section>
                    <h3>Script</h3>
                    <div>
                        Contains the JavaScript logic of your component,
                        where you define variables, functions, etc.
                    </div>
                    <pre><code data-trim class="language-javascript">
                        <script>
                        import { defineComponent } from 'vue'

                        export default defineComponent({
                            name: 'IndexPage',
                            data() {
                                return {
                                    contractAddress: 'bitcoincash:p...',
                                    passcode: 'my-passcode',
                                }
                            }
                        })
                        </script>
                    </code></pre>
                </section>
                <section>
                    <h3>Style</h3>
                    <div>
                        Holds the CSS (or preprocessor like SCSS/SASS) for your component.
                    </div>
                    <pre><code data-trim class="language-css">
                        &ltstyle scoped>
                        h5 {
                            margin-top: 4px;
                            margin-bottom: 4px;
                        }
                        &lt/style>
                    </code></pre>
                </section>
            </section>
            <section>
                <h2>Vue JS Basics</h2>
            </section>
            <section>
                <section data-auto-animate>
                    <h3>Declarative Rendering</h3>
                    <div>
                        You describe what the UI should look like based
                        on the state of your component
                    </div>
                </section>
                <section data-auto-animate>
                    <h3>Declarative Rendering</h3>
                    <div>
                        Unlike imperative style
                        <span class="fragment">
                            where you have to:
                            <i class="text-blue-300">document</i>.<i class="text-yellow-200">getElementById</i>(...)
                        </span>
                        <span class="fragment">
                            , set .<i class="text-blue-300">innerHTML</i>
                        </span>
                        <span class="fragment">
                            , <i class="text-blue-300">classList.<span class="text-yellow-200">add</span>(...)</i>
                        </span>
                    </div>
                    <div class="fragment">Vue framework takes care of this</div>
                </section>
                <section data-auto-animate>
                    <h3>Declarative Rendering</h3>
                    <div class="flex justify-center">
                        <img src="../../images/declarative-rendering.svg" class="h-64"/>
                    </div>
                </section>
                <section data-auto-animate>
                    <h3>Declarative Rendering</h3>
                    <div>Declare the component's state variables in <strong class="text-yellow-200">data()</strong></div>
                    <pre><code data-trim class="language-javascript" data-line-numbers="5-10">
                        <script>
                        import { defineComponent } from 'vue'
                        export default defineComponent({
                            name: 'IndexPage',
                            data() {
                                return {
                                    contractAddress: 'bitcoincash:p...',
                                    passcode: 'my-passcode',
                                }
                            }
                        })
                        </script>
                    </code></pre>
                </section>
                <section data-auto-animate>
                    <h3>Declarative Rendering</h3>
                    <div>
                        Use double curly braces <strong class="text-yellow-400">{{ }}</strong> to
                        display variables and expressions in html components
                    </div>
                    <pre><code data-trim class="language-html" data-line-numbers="5">
                        <template>
                            <div>
                                <h5>
                                    Contract address:
                                    {{ contractAddress }}
                                </h5>
                            </div>
                        </template>
                    </code></pre>
                </section>
                <section data-auto-animate>
                    <h3>Declarative Rendering</h3>
                    <div>
                        Use data binding to pass variables or expressions as html attributes
                        using <strong class="text-blue-300">v-bind</strong>
                    </div>
                    <pre><code data-trim class="language-html" data-line-numbers="3-4">
                        <template>
                            <div>
                                <div v-bind:id="myDivId"></div>
                                <div :id="myDivId.toUpperCase()"></div>
                            </div>
                        </template>
                    </code></pre>
                </section>
            </section>

            <section data-auto-animate>
                <h3>Activity: Set state variables</h3>
                <div>
                    Set the initial values of state variables in
                    <i class="text-yellow-200">IndexPage.vue</i>
                </div>
                <pre><code data-trim class="language-javascript" data-line-numbers="5-12">
                    <script>
                    import { defineComponent } from 'vue'
                    export default defineComponent({
                        name: 'IndexPage',
                        data() {
                            // Copy values used in 'contracts/password-vault-instantiate.js'
                            return {
                                payoutAmount: 1234n, // satoshis
                                ownerAddress: 'bitcoincash:q...',
                                passcode: 'unique-passcode',
                            }
                        }
                    })
                    </script>
                </code></pre>
            </section>

            <section>
                <section data-auto-animate>
                    <h3>Handling events</h3>
                    <div>
                        Listening to DOM events using
                        <strong class="text-blue-300">v-on</strong> or
                        <strong class="text-blue-300">@</strong>. 
                    </div>

                    <pre><code data-trim class="language-html">
                        <button v-on:click="createContract">Create contract</button>

                        <button v-on:click="createContract()">Click me</button>

                        <button @click="createContract">Create contract</button>

                        <button @click="createContract()">Click me</button>
                    </code></pre>

                    <div class="p-2 rounded-lg bg-white/10">
                        Accepts a function or an expression
                    </div>
                </section>
                <section data-auto-animate>
                    <h3>Handling events</h3>
                    <div>
                        Functions referenced in template are declared in
                        <strong class="text-blue-300">methods</strong>
                    </div>

                    <pre><code data-trim class="language-javascript" data-line-numbers="3-8">
                        export default defineComponent({
                            name: 'IndexPage',
                            // data() function
                            methods: {
                                createContract() {
                                    // function code here
                                },
                            },
                        })
                    </code></pre>
                </section>
                <section data-auto-animate>
                    <h3>Handling events</h3>
                    <div>
                        Inside the function, you can access state variables & other functions using
                        <strong class="text-blue-500">this</strong> object
                    </div>

                    <pre><code data-trim class="language-javascript" data-line-numbers="7-8">
                        export default defineComponent({
                            name: 'IndexPage',
                            // data() function
                            methods: {
                                createContract() {
                                    const passwordVaultContract = createContractInstance(this.payoutAmount, this.ownerAddress, this.passcode)
                                    this.contractAddress = passwordVaultContract.address;
                                    this.anotherMethod();
                                },
                            },
                        })
                    </code></pre>
                </section>
            </section>

            <section data-auto-animate>
                <h3>Activity: Using Events</h3>
                <div>
                    Add an event listener to button in
                    <i class="text-yellow-200">IndexPage</i>'s
                    template
                </div>
                <pre><code data-trim class="language-html" data-line-numbers="3">
                    <template>
                        // ...
                        <button @click="createContract" class="my-btn">
                            Create contract
                        </button>
                    </template>
                </code></pre>
            </section>

            <section>
                <section>
                    <h3>More Vue JS Basics</h3>
                    <ul>
                        <li>Rendering lists</li>
                        <li>Conditional Rendering</li>
                        <li>Computed Property</li>
                        <li>Watchers</li>
                        <li>Lifecycle Hooks</li>
                    </ul>
                </section>
                <section>
                    <h3>List rendering</h3>
                    <div class="mt-4 p-4 bg-white/10 rounded-lg text-2xl">
                        Using <strong class="text-blue-300">v-for</strong>,
                        we can loop using arrays, objects, and integers.
                    </div>
                    <pre><code data-trim class="language-html" data-line-numbers="">
                        <!-- Looping with arrays -->
                        <li v-for="(fruit, index) in fruits" :key="index">
                            Fruit #{{ index + 1 }} : {{ fruit }}
                        </li>

                        <!-- Looping with objects -->
                        <li v-for="(value, key) in profile" :key="key">
                            {{ key }} : {{ value }}
                        </li>

                        <!-- Looping with a number -->
                        <li v-for="(index) in 10" :key="index">
                            <!-- Starts at 1 -->
                            Item {{ index }}
                        </li>
                    </code></pre>
                </section>
                <section>
                    <h3>Conditional Rendering</h3>
                    <div class="mt-4 p-4 bg-white/10 rounded-lg text-2xl">
                        <ul>
                            <li>
                                <strong class="text-blue-300">v-if</strong> and
                                <strong class="text-blue-300">v-else-if</strong>
                                accepts any valid javascript expression
                            </li>
                            <li>
                                <strong class="text-blue-300">v-if</strong>
                                removes the element from DOM
                            </li>
                            <li>
                                <strong class="text-blue-300">v-show</strong>
                                hides elements using CSS with
                                <i>display: none;</i>
                            </li>
                        </ul>
                    </div>
                    <pre><code data-trim class="language-html" data-line-numbers="">
                        <p v-if="contractAddress.length === 0">
                            Address is empty
                        </p>
                        <p v-else-if="contractAddress == null">
                            Address is null
                        </p>
                        &ltp v-else>
                            Address is not empty
                        &lt/p>

                        <p v-show="contractAddress.length > 0">
                            Contract address: {{ contractAddress }}
                        </p>
                    </code></pre>
                </section>
                <section>
                    <h3>Computed properties</h3>
                    <div class="mt-4 p-4 bg-white/10 rounded-lg text-2xl">
                        <ul>
                            <li>State variables that are derived from other state variables</li>
                            <li>Reactive, automatically updates value when dependencies change</li>
                        </ul>
                    </div>
                    <pre><code data-trim class="language-html" data-line-numbers="">
                        <template>
                            {{ payoutAmount }}
                            {{ paymentAmountBch }}
                        </template>
                    </code></pre>
                    <pre><code data-trim class="language-javascript" data-line-numbers="2-6">
                        export default defineComponent({
                            computed: {
                                paymentAmountBch: function() {
                                    return Number(this.payoutAmount) / 100_000_000;
                                },
                            },
                        })
                        
                    </code></pre>
                </section>
                <section>
                    <h3>Watchers</h3>
                    <div class="mt-4 p-4 bg-white/10 rounded-lg text-2xl">
                        Functions that run when a state variable or computed property changes
                    </div>
                    <pre><code data-trim class="language-javascript" data-line-numbers="2-11">
                        export default defineComponent({
                            watch: {
                                passcode(newValue, oldValue) {
                                    console.log(
                                        'Count changed!',
                                        'Before:', oldValue,
                                        'After:', newValue
                                    );

                                    // 'this' keyword is accessible
                                    this.createContract(); 
                                },
                            }
                        })
                    </code></pre>
                </section>
                <section>
                    <h3>Lifecycle Hooks</h3>
                    <div class="mt-4 p-4 bg-white/10 rounded-lg text-2xl">
                        Functions that run based on the stages of the component's lifecyle
                    </div>
                    <pre><code data-trim class="language-javascript" data-line-numbers="2-36">
                        export default defineComponent({
                            /* Vue Component's Lifecycle hooks */
                            beforeCreate() {
                                window.alert('Before create!');
                            },

                            // 'this' object is accessible in lifecycle hooks,
                            // except `beforeCreate()`
                            created() {
                                window.alert('Created');
                                console.log(this.contractAddress);
                            },

                            beforeMount() {
                                window.alert('Before mount');
                            },

                            mounted() {
                                window.alert('Mounted');
                            },

                            beforeUpdate() {
                                console.log('Before update')
                            },

                            updated() {
                                console.log('Updated')
                            },

                            beforeUnmount() {
                                window.alert('Before unmount')
                            },

                            unmounted() {
                                window.alert('Unmounted')
                            }
                        })
                    </code></pre>
                </section>
            </section>

            <section>
                <h3>Activity: Autorun create contract</h3>
                <div>
                    Call the function
                    <i class="text-blue-300">this.createContract()</i>
                    in the
                    <i class="text-blue-300">mounted()</i>
                    lifecycle hook
                </div>
                <pre><code data-trim class="language-javascript" data-line-numbers="6-8">
                    export default defineComponent({
                        name: 'IndexPage',
                        // data() function
                        // computed: ...
                        // methods: ...
                        mounted() {
                            this.createContract();
                        }
                    })
                </code></pre>
            </section>

            <section>
                <h3>Components</h3>
                <ul>
                    <li>We've been using a single component only</li>
                    <li>One key feature of Vue is to have nested components</li>
                </ul>
                <img src="../../images/ComponentsDiagram.svg" alt="Components diagram">
            </section>
            <section>
                <section data-auto-animate>
                    <h3>Using components</h3>
                    <pre><code data-trim class="language-python" data-line-numbers="3,7,10-12">
                        <template>
                            <div> 
                                &ltDisplayAddressButton/>
                            </div>
                        </template>
                        <script>
                        import DisplayAddressButton from 'src/components/buttons/DisplayAddressButton.vue'
                        export default defineComponent({
                            name: 'IndexPage',
                            components: {
                                DisplayAddressButton,
                            },
                            // data() function
                        })
                        </script>

                    </code></pre>
                </section>
                <section data-auto-animate>
                    <h3>Using components</h3>
                    <div>1. Import the component</div>
                    <pre><code data-trim class="language-javascript" data-line-numbers="2">
                        <script>
                        import DisplayAddressButton from 'src/components/buttons/DisplayAddressButton.vue'
                        // ...
                        </script>
                    </code></pre>
                </section>
                <section data-auto-animate>
                    <h3>Using components</h3>
                    <div>2. Register the component to the parent component</div>
                    <pre><code data-trim class="language-javascript" data-line-numbers="3-5">
                        export default defineComponent({
                            name: 'IndexPage',
                            components: {
                                DisplayAddressButton,
                            },
                            // data() function
                        })
                    </code></pre>
                </section>
                <section data-auto-animate>
                    <h3>Using components</h3>
                    <div>3. Then use the component in the template</div>
                    <pre><code data-trim class="language-html" data-line-numbers="3">
                        <template>
                            <div>
                                &ltDisplayAddressButton/>
                            </div>
                        </template>
                    </code></pre>
                </section>
            </section>

            <section>
                <section data-auto-animate>
                    <h3>Component Props</h3>
                    <div>
                        A child component can accept input from the parent via props.
                    </div>
                    <pre><code data-trim class="language-javascript" data-line-numbers="3-6">
                    export default {
                        name: 'DisplayAddressButton',
                        props: {
                            address: String,
                        }
                    }
                    </code></pre>
    
                    <pre><code data-trim class="language-html" data-line-numbers="4">
                    // IndexPage.vue
                    <template>
                        <div>
                            &ltDisplayAddressButton :address="contractAddress" />
                        </div>
                    </template>
                    </code></pre>
                </section>
                <section data-auto-animate>
                    <h3>Component Props</h3>
                    <div>Declare the props in child components</div>
                    <pre><code data-trim class="language-javascript" data-line-numbers="3-10">
                        export default {
                            name: 'DisplayAddressButton',
                            props: {
                                address: String,
                                qrSize: {
                                    type: Number,
                                    required: false,
                                    default: 300,
                                },
                            }
                        }
                    </code></pre>
                    <div class="mt-4 p-4 bg-white/10 rounded-lg text-2xl">
                        Each prop can be a data type or object with additional options
                    </div>
                </section>

                <section data-auto-animate>
                    <h3>Component Props</h3>
                    <div>We pass props to the child component using attribute binding</div>
                    <pre><code data-trim class="language-javascript" data-line-numbers="3">
                        <template>
                            <div>
                                &ltCounterButton :text="buttonText" :size="400"/>
                            </div>
                        </template>
                    </code></pre>
                </section>
                <section data-auto-animate>
                    <h3>Component Props</h3>
                    <div>
                        Props are <strong class="text-yellow-400">ready-only</strong>
                    </div>
                    <pre><code data-trim class="language-javascript" data-line-numbers="6-10">
                        export default defineComponent({
                            name: 'DisplayAddressButton',
                            props: { address: String },
                            methods: {
                                displayQrCode() {
                                    // This is ok!
                                    console.log(this.address);

                                    // This is not ok!
                                    this.address = 'Updated text';
                                }
                            }
                        })
                    </code></pre>
                </section>
            </section>

            <section data-auto-animate>
                <h3>Activity: Using components</h3>
                <div>
                    Pass <i class="text-blue-200">contractAddress</i> as prop to
                    <i class="text-blue-300">DisplayAddressButton.vue</i>
                </div>
                <pre><code data-trim class="language-html" data-line-numbers="3">
                    <template>
                        <div>
                            &ltDisplayAddressButton :address="contractAddress"/>
                        </div>
                    </template>
                </code></pre>
            </section>

            <section>
                <section data-auto-animate>
                    <h3>Form Input Bindings</h3>
                    <div>
                        The <strong class="text-blue-300">v-model</strong> allows
                        two-way data binding for form input elements,
                        automatically syncing the input's value and the variables value
                    </div>
                    <pre><code data-trim class="language-html" data-line-numbers="">
                        <input v-model="message" />

                        <input v-model="checked" type="checkbox" />

                        <textarea v-model="message"></textarea>
                    </code></pre>
                </section>
                <section data-auto-animate>
                    <h3>Form Input Bindings</h3>
                    <div>
                        It works on all form related elements
                    </div>
                    <pre><code data-trim class="language-html" data-line-numbers="">
                        <input v-model="message" />

                        <input v-model="checked" type="checkbox" />

                        <select v-model="selectedOption">
                            <!-- options here -->
                        </select>

                        <input type="radio" v-model="pick" :value="first" />
                        <input type="radio" v-model="pick" :value="second" />
                    </code></pre>
                </section>

                <section data-auto-animate>
                    <h3><span class="text-blue-300">v-model</span> modifiers</h3>
                    <div>
                        The vue directive have modifiers that adds
                        extra behavior
                    </div>
                    <pre><code data-trim class="language-html">
                        <input v-model.lazy="message"/>
                        <input v-model.number="checked" type="numeric"/>
                        <input v-model.trim="message"/>
                        ...
                        <input v-model.lazy.trim="message"/>
                    </code></pre>
                </section>
                <section data-auto-animate>
                    <h3><span class="text-blue-300">v-model</span> modifiers</h3>
                    <div>
                        <span class="text-blue-300">.lazy</span>
                        updates the variable's value after losing focus
                    </div>
                    <pre><code data-trim class="language-html">
                        <input v-model.lazy="message"/>
                    </code></pre>
                </section>
                <section data-auto-animate>
                    <h3><span class="text-blue-300">v-model</span> modifiers</h3>
                    <div>
                        <span class="text-blue-300">.number</span>
                        typecast's the value as a number instead of string
                    </div>
                    <pre><code data-trim class="language-html">
                        <input v-model.number="amount" type="numeric"/>
                    </code></pre>
                </section>
                <section data-auto-animate>
                    <h3><span class="text-blue-300">v-model</span> modifiers</h3>
                    <div>
                        <span class="text-blue-300">.trim</span>
                        removes the whitespace at the start and end of the value
                    </div>
                    <pre><code data-trim class="language-html">
                        <input v-model.trim="message"/>
                    </code></pre>
                </section>
                <section data-auto-animate>
                    <h3><span class="text-blue-300">v-model</span> modifiers</h3>
                    <div>
                        It is also possible to mix modifiers
                    </div>
                    <pre><code data-trim class="language-html">
                        <input v-model.lazy.trim="message"/>
                    </code></pre>
                </section>
            </section>

            <section data-auto-animate>
                <h3>Activity: Form input binding</h3>
                <div>
                    <i class="text-blue-300">PasswordVaultFormCard.vue</i>
                    in
                    <i class="text-blue-300">src/components/src/cards/</i>
                    and add
                    <i class="text-blue-300">v-model</i>
                    to the input fields
                </div>
                <pre><code data-trim class="language-html">
                    &ltq-input v-model.number="formPayoutAmount" label="Payout Amount"/>

                    &ltq-input v-model.trim="formOwnerAddress" label="Owner address"/>

                    &ltq-input v-model="formPasscode" label="Passcode"/>
                </code></pre>
            </section>

            <section>
                <section data-auto-animate>
                    <h3>Component events</h3>
                    <div class="flex items-center">
                        <div class="text-left">
                            <i class="text-blue-200">props</i> communicate from parent to child,

                            <i class="text-blue-300">events</i> are used to communicate from child to parent.
                        </div>
                        <img src="../../images/component-prop-event.svg" style="height:28rem;"/>
                    </div>
                </section>
                <section>
                    <h3>Component events</h3>
                    <pre><code data-trim class="language-html" data-line-numbers="2,5,6">
                        <!-- ChildComponent.vue -->
                        <button @click="$emit('contractSubmit')">Click me</button>

                        <!-- ParentComponent.vue -->
                        &ltChildComponent @contract-submit="onCreateContract"/>
                        &ltChildComponent @contractSubmit="onCreateContract"/>
                    </code></pre>
                </section>
                <section data-auto-animate>
                    <h3>Component events</h3>
                    <div>
                        Emit events from child component using
                        <span class="text-blue-300">$emit</span>
                    </div>
                    <pre><code data-trim class="language-html" data-line-numbers="2">
                        <template>
                            <button @click="$emit('contractSubmit')">Click me</button>
                        </template>
                    </code></pre>
                    <pre><code data-trim class="language-javascript" data-line-numbers="5">
                        export default defineComponent({
                            // name: 'PasswordVaultFormCard', data() { .. } ..
                            methods: {
                                onButtonClick() {
                                    this.$emit('contractSubmit')
                                }
                            }
                        })
                    </code></pre>
                    <div class="mt-4 p-4 bg-white/10 rounded-lg">
                        First parameter is the event name, preferrably in
                        <i class="text-yellow-200">camelCase</i>
                    </div>
                </section>
                <section data-auto-animate>
                    <h3>Component event arguments</h3>
                    <pre><code data-trim class="language-javascript" data-line-numbers="5">
                        export default defineComponent({
                            // name: 'PasswordVaultFormCard', data() { .. } ..
                            methods: {
                                submitForm() {
                                    this.$emit('contractSubmit', arg1, arg2, argN)
                                }
                            }
                        })
                    </code></pre>

                    <div class="mt-4 p-4 bg-white/10 rounded-lg">
                        Parameters after the event name
                        are passed as arguments
                    </div>
                </section>
                <section>
                    <h3>Component events</h3>
                    <div class="mt-4 p-4 bg-white/10 rounded-lg text-2xl">
                        Parent component can listen to events from child component through
                        <i class="text-blue-300">v-on</i> or <i class="text-blue-300">@</i>
                    </div>
                    <pre><code data-trim class="language-javascript" data-line-numbers="1">
                        &ltPasswordVaultFormCard @contract-submit="onCreateContract"/>
                    </code></pre>
                    <pre><code data-trim class="language-javascript" data-line-numbers="4-6">
                        name: 'IndexPage',
                        // data() { ... }
                        methods: {
                            onCreateContract(arg1, arg2 argN) {
                                // ... 
                            },
                        },
                    </code></pre>
                </section>
            </section>

            <section data-auto-animate>
                <h3>Activity: Component Events</h3>
                <div>
                    In <i class="text-blue-300">PasswordVaultFormCard</i>'s
                    <i class="text-yellow-200">submitForm</i> method,
                    emit an event and pass the form field's values as arguments
                </div>
                <pre><code data-trim class="language-javascript" data-line-numbers="3-7">
                    methods: {
                        submitForm() {
                            this.$emit(
                                'createContract',
                                this.formPayoutAmount,
                                this.formOwnerAddress,
                                this.formPasscode,
                            )
                        }
                    }
                </code></pre>
            </section>

            <section data-auto-animate>
                <h3>Contract instantiation</h3>
                <div id="contract-instantiation-diagram-2" class="mermaid p-2 bg-white rounded-lg">
                    sequenceDiagram
                    App->>FormComponent: User inputs contract parameters
                    App->>FormComponent: User click a button
                    FormComponent-->>IndexPage: Emits an event containing new contract parameters
                    IndexPage-->>IndexPage: Saves new contract parameters
                    IndexPage-->>Cashscript: Recreate new contract instance
                    Cashscript-->>IndexPage: Save contract details to component state
                    IndexPage-->>App: Display contract details
                </pre>
            </section>

            <section>
                <h2>Quasar Components</h2>
            </section>
            <section>
                <section data-auto-animate>
                    <h3>Quasar Components</h3>
                    <ul>
                        <li>Wide range of ready made components</li>
                        <li>Highly customizable</li>
                        <li>Material Design compliant</li>
                        <li>Registered globally, no need for imports</li>
                    </ul>
                </section>
                <section data-auto-animate>
                    <h3>Quasar Buttons</h3>
                    <pre><code data-trim class="language-javascript">
                        <template>
                            &ltq-btn label="Click me"&#47;&gt
                            &ltq-btn label="Red" :color="btnColor"&#47;&gt
                            &ltq-btn no-caps :label="brownBtnLabel" color="brown-9"&#47;&gt
                            &ltq-btn label="Blue" color="primary" :loading="isLoading"&#47;&gt
                            &ltq-btn icon="delete" color="red"&#47;&gt
                        </template>
                    </code></pre>
                    <img src="../../images/quasar-btn.png" class="mx-auto"/>
                </section>

                <section data-auto-animate>
                    <h3>Quasar Form Inputs</h3>
                    <pre><code data-trim class="language-javascript">
                        <template>
                            &ltq-input v-model="name" label="Name" &#47;&gt
                            &ltq-input v-model="name" label="Name" outlined &#47;&gt
                            &ltq-file v-model="file" label="File Picker" &#47;&gt
                            &ltq-select v-model="selected" label="Select" :options="['Google', 'Facebook', 'Instagram']"&#47;&gt
                            &ltq-toggle v-model="isSwitchedOn" label="Switch"&#47;&gt
                            &ltq-checkbox v-model="isChecked" label="Checkbox"&#47;&gt
                        </template>
                    </code></pre>
                    <img src="../../images/quasar-form.png" class="h-30"/>
                </section>

                <section data-auto-animate>
                    <h3>Quasar Components</h3>
                    <div>
                        Full list of components in documentation page
                        <a href="https://quasar.dev/components" data-preview-link>
                            https://quasar.dev/components
                        </a>
                    </div>
                </section>
            </section>

            <section>
                <div>Components use props & events to pass around data.</div>
                <div>
                    <span class="fragment">
                        With larger apps with numerous components,
                    </span>
                    <span class="fragment">this can get messy</span>
                </div>
                <div class="fragment">
                    How can we address this?
                </div>
                <div class="fragment">
                    A global storage. 
                </div>
            </section>

            <section>
                <section>
                    <div class="flex justify-center items-center text-center space-x-4">
                        <img src="../../images/logos/pinia.svg" class="h-48">
                        <div class="text-6xl text-yellow-300">Pinia</div>
                    </div>
                    <div>
                        Library for managing shared state in Vue.
                    </div>
                </section>
                <section>

                    <h3 class="flex justify-center items-center text-center space-x-2">
                        <span>What does</span>
                        <img src="../../images/logos/pinia.svg" class="h-12">
                        <div class="text-yellow-300">Pinia</div>
                        <span>do?</span>
                    </h3>
                    <ul>
                        <li>Holds shared data accessible to all components</li>
                        <li>It works with VueJS' reactivity</li>
                        <li>
                            Can keep data persisted
                            <ul>
                                <li>
                                    Through
                                    <span class="text-green-400">pinia-plugin-persistedstate-2</span>
                                    library
                                </li>
                                <li>Store data is saved in <i>localStorage</i></li>
                            </ul>
                        </li>
                    </ul>
                </section>
                <section>
                    <h3 class="flex justify-center items-center text-center space-x-2">
                        <img src="../../images/logos/pinia.svg" class="h-12">
                        <div class="text-yellow-300">Pinia</div>
                    </h3>
                    <div class="flex justify-center">
                        <img src="../../images/pinia-diagram.svg" style="height:34rem;"/>
                    </div>
                </section>
                <section>
                    <pre><code data-trim class="language-text" data-line-numbers="3-5">
                        quasar-project/
                        ‚îú‚îÄ‚îÄ src/
                        ‚îÇ   ‚îú‚îÄ‚îÄ stores/               # Pinia folder
                        ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ index.js          # Creation file
                        |   |   ‚îî‚îÄ‚îÄ example-store.js  # Pinia store example 
                        ‚îî‚îÄ‚îÄ ...
                    </code></pre>
                    <div class="mt-4 p-4 bg-white/10 rounded-lg text-2xl">
                        Quasar framework has pinia setup by default.
                    </div>
                </section>
                <section>
                    <h3>Defining a store</h3>
                    <pre><code data-trim class="language-javascript" data-line-numbers="">
                        // src/store/contract-store.js

                        import { defineStore } from 'pinia'

                        export const useContractStore = defineStore('contract', {
                            state: function() {
                                return {
                                    address: '',
                                    balance: 0,
                                }
                            },
                            getters: {
                                bchBalance() {
                                    return this.balance / 100_000_000;
                                }
                            },
                            actions: {
                                updateAddress(newAddress) {
                                    this.address = newAddress;
                                },
                            },
                        })
                    </code></pre>
                </section>
                <section>
                    <h3>Using the store</h3>
                    <pre><code data-trim class="language-javascript" data-line-numbers="">
                        import { mapState } from 'pinia';
                        import { useContractStore } from 'src/store/contract-store.js';

                        export default defineComponent({
                            computed: {
                                ...mapState(useContractStore, {
                                    contractAddress: 'address',
                                    contractBalance: function(contractStore) {
                                        return contractStore.balance;
                                    }
                                })
                            },
                            methods: {
                                updateContract(newAddress, newBalance) {
                                    const contractStore = useContractStore();

                                    contractStore.updateAddress(newAddress);
                                    contractStore.balance = newBalance;
                                }
                            }
                        })
                    </code></pre>
                </section>
            </section>

            <section>
                <section data-auto-animate>
                    <h3>Activity: Use pinia store</h3>
                    <ol>
                        <li>Save contract data to store</li>
                        <li>Access contract data from store</li>
                    </ol>
                </section>
                <section>
                    <h3>Activity: Use pinia store</h3>
                    <div>
                        Save contract data to store in <i class="text-blue-200">IndexPage</i>
                    </div>
                    <pre><code data-trim class="language-javascript" data-line-numbers="7-10">
                        export default defineComponent({
                            name: 'IndexPage',
                            // data() { ... }
                            // computed: { ... }
                            methods: {
                                onFormCardSubmit(payoutAmount, ownerAddress, passcode) {
                                    const contractStore = useContractStore();
                                    contractStore.saveContract(
                                        payoutAmount, ownerAddress, passcode,
                                    );
                                },
                            }
                        })
                    </code></pre>
                </section>
                <section>
                    <h3>Activity: Use pinia store</h3>
                    <div>Access contract data from store</div>
                    <pre><code data-trim class="language-javascript" data-line-numbers="3,6-9">
                        export default defineComponent({
                            name: 'IndexPage',
                            // remove data() { ... }
                            computed: {
                                ...mapState(useContractStore, {
                                    contractAddress: 'contractAddress',
                                    payoutAmount: 'payoutAmount',
                                    ownerAddress: 'ownerAddress',
                                    passcode: 'passcode',
                                }),
                            }
                        })
                    </code></pre>
                </section>
            </section>

            <section>
                <h3>Activity: Display contract balance</h3>
                <ol>
                    <li>Use the contract store to display the balance</li>
                    <li>Add a button to refresh balance</li>
                </ol>
            </section>

            <section data-auto-animate>
                <h3>References</h3>
                <ul>
                    <li>
                        Vue JS docs
                        <div class="px-4 bg-white/10 rounded-lg text-blue-300">
                            https://vuejs.org
                        </div>
                    </li>
                    <li>
                        Quasar components
                        <div class="px-4 bg-white/10 rounded-lg text-blue-300">
                            https://quasar.dev/components
                        </div>
                    </li>
                    <li>
                        Creating Quasar project
                        <div class="px-4 bg-white/10 rounded-lg text-blue-300">
                            https://quasar.dev/start/quick-start
                        </div>
                    </li>
                    <li>
                        Pinia: The intuitive store for Vue JS
                        <div class="px-4 bg-white/10 rounded-lg text-blue-300">
                            https://pinia.vuejs.org/
                        </div>
                    </li>

                    <li>
                        Vue Router
                        <div class="px-4 bg-white/10 rounded-lg text-blue-300">
                            https://router.vuejs.org/
                        </div>
                    </li>
                </ul>
            </section>

            <section>
                <h2>Back to Main</h2>
                <p><a href="../../index.html">‚Üê Workshop Overview</a></p>
            </section>

            <section data-visibility="uncounted">
                <h3>Creating quasar project</h3>
                <ol class="text-3xl">
                    <li>Run command <i class="text-blue-300">npm init quasar@latest</i></li>
                    <li class="fragment">Set configuration
                        <ul>
                            <li class="fragment">
                                Select: <i class="text-blue-300">App with Quasar CLI</i>
                            </li>
                            <li class="fragment">
                                Set project folder name  (e.g. "my-project")
                            </li>
                            <li class="fragment">
                                Select script type: Javascript (or Typescript)
                            </li>
                            <li class="fragment">
                                Select <i class="text-blue-300">Quasar CLI with Webpack</i>
                            </li>
                            <li class="fragment">
                                Set package name (e.g. "my-project")
                            </li>
                            <li class="fragment">
                                Set project name (e.g. "My Project")
                            </li>
                            <li class="fragment">
                                Set project description
                            </li>
                            <li class="fragment">
                                Select Vue component style: <i class="text-blue-300">Options API</i>
                            </li>
                            <li class="fragment">
                                Select CSS preprocessor
                            </li>
                            <li class="fragment">
                                Select features in project: Linting (ESLint), State Management (Pinia), axios
                            </li>
                        </ul>
                    </li>
                    <li class="fragment">
                        Move to project folder <i class="text-blue-300">cd my-project</i>
                    </li>
                    <li class="fragment">
                        Install dependencies <i class="text-blue-300">npm install</i>
                    </li>
                    <li class="fragment">
                        Run server <i class="text-blue-300">quasar dev</i>
                    </li>
                </ol>
            </section>
        </div>
    </div>

    <script src="/node_modules/mermaid/dist/mermaid.js"></script>
    <script>
        const MermaidPlugin = {
            id: 'mermaid',
            init: (deck) => {
                mermaid.initialize({ startOnLoad: false });

                setTimeout(() => {
                    deck.on('ready', () => {
                        renderMermaidSlides();
                    });
                }, 500)

                deck.on('slidechanged', () => {
                    renderMermaidSlides();
                });

                function renderMermaidSlides() {
                    const nodes = [];
                    document.querySelectorAll('.mermaid').forEach(el => {
                        if (!el.hasAttribute('data-processed')) nodes.push(el)
                    })

                    mermaid.run({ nodes });
                }
            }
        };
    </script>
    <script src="/node_modules/reveal.js/dist/reveal.js"></script>
    <script src="/node_modules/reveal.js/plugin/highlight/highlight.js"></script>
    <script>
        Reveal.initialize({
            hash: true,
            transition: 'fade',
            plugins: [RevealHighlight, MermaidPlugin]
        });
    </script>
</body>